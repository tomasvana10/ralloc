# ralloc

Ralloc is a web-based tool designed for fast, ephemeral group allocation.

Visit the deployment [here](https://ralloc.xyz).


## Guide
todo


## Installation and self-hosting

If you are interested in self-hosting ralloc, follow these steps.

Requirements: `npm`, `git`

1. Create an OAuth application (ralloc currently uses Google).
2. `git clone https://github.com/tomasvana10/ralloc`
3. `cd ralloc`
4. `npm i`
5. Create 3 environment files:

`.env.development`
```
NEXT_PUBLIC_URL=http://localhost:3000
AUTH_URL=http://localhost:3000
```

`.env.production`
```
NEXT_PUBLIC_URL=your-host-url
AUTH_URL=your-host-url
```

`.env.local`
```
AUTH_SECRET="secret auto-generated by next-auth"
AUTH_<provider>_ID=...
AUTH_<provider>_SECRET=...
```

### Running with docker

1. `cd .docker` 
2. **Build and up the images**: `docker compose -f compose.<prod | dev>.yaml up --build` (-d to start detached).

### Running without docker

**For development**: `npm run dev`

**For production**:
1. Remove `output: "standalone"` from `next.config.ts`.
2. `npm run build && npm run start`


## Todo

- [ ] i18n (probably)
- [ ] Create `CONTRIBUTING.md`
- [ ] Create support/help page (on the website or on github)
- [ ] Implement group control - UI, websockets, etc.
- [ ] Add reverse mapping for the group a user is in (probably like `host:<hostId>:session:<userId>:<groupName>`)
- [ ] Consider Lua scripting to ensure atomicity when joining/leaving a group
- [ ] Consider sliding window rate limits with redis based on user id
- [ ] Consider adding alternative authentication methods (`GitHub`)
- [ ] Revise Redis DB structure for optimisations and removal of redundant keys
- [X] (*partial*) Document info for installation and usage on `README.md`
- [X] [Containerise](https://github.com/vercel/next.js/tree/canary/examples/with-docker-compose) - include redis image
- [X] Configure Cloudflare tunnel and security
- [X] Buy domain `ralloc.xyz`
- [X] Implement home and session viewer
- [X] Implement REST API for sessions
- [X] Add basic Google authentication 
